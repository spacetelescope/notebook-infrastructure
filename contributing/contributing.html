<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Contributing Notebooks</title>
    <meta name="description" content="Contributing to STScI's Jupyter Notebooks.">
    <link rel="stylesheet" href="../ancillary.css">
    <link href="https://fonts.googleapis.com/css2?family=Overpass:wght@400;900&display=swap" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Oswald" rel='stylesheet' type='text/css'>
    <link href="http://fonts.googleapis.com/css?family=Oswald-light" rel='stylesheet' type='text/css'>                                                                                                    
</head>

<img src="../images/stsci-logo.svg" alt="Space Telescope Science Institute">
<a class="contact" style="color:white;" href="https://github.com/spacetelescope/notebook-infrastructure/issues/new">Contact Us</a>                               <br>                           
<br>   

<h1>How to Contribute to Space Telescope Notebooks</h1>
<p>Contributions are welcome from both inside and outside the Institute. Whether contibuting, commenting, or giving feedback, we expect everyone to follow our <a href="code_of_conduct.html">code of conduct</a>.</p>

<h1>Submission Policies</h1>
These are the high-level notebook submission policies. More comprehensive guidelines may be given in the other repositories, but following these guidelines is a necessary first step.

<h2>Foundations</h2>
<p>Notebook code cells must be written in Python. Notebooks must use the kernel name python3. Version support is detailed in the <a href="https://github.com/spacetelescope/style-guides/blob/master/guides/software-versioning.md">Version Support Guide</a>.
Notebook documentation cells are written in Markdown.<br>
<p>Do NOT commit executed Notebooks. This needlessly inflates the size of our repositories and is a bit of a nightmare to handle.</p>

<h3>Files and directories</h3>
All notebooks must be in a sub-directory of the main notebooks directory. The directory name and the names of the files contained within it cannot contain whitespace or non-printable characters. (Underscores should be used in lieu of a space)<br><br>
In general, unique notebooks on different topics should each be in their own directory with only one notebook. However, multi-part notebooks are best implemented as multiple notebooks in the same directory. They will then be run in alphabetical order, sharing the same execution directory.  Hence, a "Part 1" can generate files that are used in later parts.<br><br>
Given a minimal Python environment, the notebook(s) should run correctly after the requirements are installed. <br>
Each notebook directory must contain one or more .ipynb extension files, or directories that themselves contain notebooks. Each directory must contain a file named requirements.txt which lists the dependencies for the notebooks in that directory and any sub-directories. The "requirements.txt" file in a notebook directory follows these rules/guidelines:
<ul>
<li>The requirements.txt file must be non-empty.</li>
<li>All package requirements in the requirements.txt file <b>must</b> use the '>=' operator, never '=='. Security updates may require newer version of package dependencies to be installed in future builds.</li>
<li>When versions are given as ">=", that should be interpreted as "last known working version".  The prime goal here is to ensure there is a record of what version of dependencies is known to produce the output the notebook author intended, ensuring the scientific results are reproducible.</li>
</ul>
</p>

<h2>Authorship</h2>
<p>A notebook must explicitly list: <ol>
<li>An author(s): the individual(s) who wrote the notebook</li>
<li>An owner: the branch, team, or group that maintains the notebook content in the future. For external contributors (outside of STScI), the notebook author will be assigned as the owner. The owner is expected to periodically check the notebook for science relevance. </li></ol></p>

<h2>PEP8 Compliance</h2>
<p>In addition to the <a href="https://github.com/spacetelescope/style-guides/blob/master/guides/jupyter-notebooks.md">Notebook Style Guide</a>, any code in the notebook should be PEP8 compliant. PEP 8 compliance can be checked with the <a href="https://flake8.pycqa.org/en/latest/">flake8</a> and <a href="https://github.com/mattijn/pycodestyle_magic">pycodestyle_magic</a> packages.
These packages can be installed using pip:</p>
<p><code>$ pip install flake8 pycodestyle_magic</code></p>
<p>Then add these two lines in a cell at the beginning of the notebook:</p>
<p><code>%load_ext pycodestyle_magic</code></p>
<p><code>%flake8_on --ignore E261,E501,W291,W293</code></p>

<h1>Step-by-step Guide</h1>
Ready to contribute? See the <a href="https://github.com/spacetelescope/style-guides/blob/master/guides/git-workflow.md">git workflow document</a>; the preferred method is the "Forking Workflow" listed under "Workflow Instructions".
